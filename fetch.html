
<script src="https://unpkg.com/vue@next"></script>

<div id="app">
  <div v-if="isPending">loading...</div>
  <div v-else-if="data">data {{ data }}</div>
  <div v-else-if="error">Error: {{ error.message }}</div>
</div>

<script>

const { h, ref, onMounted, onUnmounted } = Vue;

function useFetch(url) {

  let data = ref(null)
  let isPending = ref(true)
  let error = ref(false)

  fetch(url)
    .then(response => response.json())
    .then(json => {
      isPending.value = false;
      error.value = false;
      data.value = json;
    }).catch((error) => {
      data.value = null;
      isPending.value = false;
      error.value = error
    });

  return {
    data, 
    isPending,
    error
  }
}

const App = {
  setup(props) {
    const {
      data,
      isPending,
      error
    } = useFetch(`https://jsonplaceholder.typicode.com/posts/1`)

    return {
      data,
      isPending,
      error
    }
  }
}

Vue.createApp(App).mount('#app')
</script>
